@echo off
title ğŸš€ Deploy Votico a Render
color 0a
echo ===========================================
echo    VOTICO.CR â€” DEPLOY AUTOMATICO A RENDER
echo ===========================================
echo.

:: Cambiar a la carpeta del proyecto
cd /d "%~dp0"

:: Verifica que sea un repo Git
git rev-parse --is-inside-work-tree >nul 2>&1
if %errorlevel% neq 0 (
    echo âŒ No parece un repositorio Git.
    pause
    exit /b
)

:: Muestra cambios pendientes
echo ğŸ§© Archivos modificados:
git status -s
echo.

:: Agrega todos los cambios
echo â• Agregando cambios...
git add .

:: Hace commit con fecha y hora automÃ¡tica
for /f "tokens=1-4 delims=/ " %%a in ('date /t') do set FECHA=%%a-%%b-%%c
for /f "tokens=1-2 delims=: " %%a in ('time /t') do set HORA=%%a%%b
git commit -m "Deploy automÃ¡tico %FECHA%_%HORA%" >nul 2>&1

:: Subir al repo
echo â˜ï¸ Subiendo a GitHub/Render...
git push origin main

:: Mensaje final
if %errorlevel% equ 0 (
    echo âœ… Â¡Push exitoso!
    echo ğŸ•’ Ahora andÃ¡ al dashboard de Render y hacÃ©:
    echo     Manual Deploy â†’ Deploy latest commit
) else (
    echo âš ï¸ Hubo un error al hacer push. RevisÃ¡ tu conexiÃ³n o credenciales.
)

echo.
pause
